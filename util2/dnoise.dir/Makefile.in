#								dnoise Makef

INCLUDE	= @includedir@
LIB	= @datadir@
DEST	= @bindir@
CFLAGS  = @CFLAGS@ @XCFLAGS@ $(DEFINES)
LIBS    = @WINLDFLAGS@ @X_LIBS@ @LIBS@

CDEP =
COBS =	$(COBJS)
LIBS = -lm

SHELL = /bin/sh
T = ../..

INC = ../..

DSRC =	dnoise.c fft.c

DOBJS =	$T/filopen.@OBJEXT@ $T/sfheader.@OBJEXT@ \
	$T/soundin.@OBJEXT@ $T/getstring.@OBJEXT@ \
	$T/wave.@OBJEXT@ $T/aiff.@OBJEXT@ $T/ieee80.@OBJEXT@ \
	$T/memalloc.@OBJEXT@ $T/aifc.@OBJEXT@ fft.@OBJEXT@ dnoise.@OBJEXT@ 

SSRC =	srconv.c

SOBJS =	$T/filopen.@OBJEXT@ $T/sfheader.@OBJEXT@ \
	$T/soundin.@OBJEXT@ $T/getstring.@OBJEXT@ \
	$T/wave.@OBJEXT@ $T/aiff.@OBJEXT@ $T/ieee80.@OBJEXT@ \
	$T/memalloc.@OBJEXT@ $T/aifc.@OBJEXT@ srconv.@OBJEXT@

PROGS   = dnoise srconv

all:		$(PROGS)

dnoise:		$(DOBJS) 
		@CC@ $(CFLAGS) -o dnoise $(DOBJS) $(LIBS)

srconv:		$(SOBJS) 
		@CC@ $(CFLAGS) -o srconv $(SOBJS) $(LIBS)

.c.@OBJEXT@:
	@CC@ -I ../../H $(CFLAGS) -c  -I$(INC) $*.c

install:	$(PROGS)
	-strip $(PROGS)
	-rm $(DEST)/dnoise
	-rm $(DEST)/srconv
	cp $(PROGS) $(DEST)

clean:
	-rm $(COBS)

rmbak:
	-rm *.bak *~

depend:
	@CC@ @CFLAGS@ @XCFLAGS@ -M $(DEFINES) $(CSRCS) > deps
	cat Makefile deps > makefile

# DO NOT DELETE THIS LINE
